package org.advent;

import org.advent.dfs.DfsCalcDonut;
import org.advent.dfsstep2.dfs.DfsCalcDonut2;
import org.advent.dfsstep2.dfs.DonutMazeStep2;

public class Main {

    static String input = "                                       V         J       Y     B   Z       B   G       M                                             \n" +
            "                                       A         Z       B     D   Z       S   T       L                                             \n" +
            "  #####################################.#########.#######.#####.###.#######.###.#######.###########################################  \n" +
            "  #...#...#.#...#.....#.#.#...........#.......#.....#.#...#.#.........#.#.#...#.#.#.#.#...#.....#...#.....#.......#.#.#...#.......#  \n" +
            "  #.#####.#.###.#.###.#.#.#######.#.#.#######.#.#.#.#.#.###.#.#.###.#.#.#.#.#.#.#.#.#.###.###.#####.#.#####.###.###.#.###.#.#.#####  \n" +
            "  #.#...#...#.....#.....#.....#...#.#.#.......#.#.#.#.......#.#...#.#.#.#...#.#...#.#.#.........#.......#.#...#...#.....#.#.#...#.#  \n" +
            "  #.###.#.#.###.#####.#.###.#.###.###.#.#####.#####.#.#.#.#.#####.###.#.###.###.#.#.#.###.###.###.#.#####.#.###.###.#####.#.#####.#  \n" +
            "  #.#.#.#.#.#.#.#.....#...#.#.......#.....#.#.#.....#.#.#.#...#.....#...#.....#.#.....#...#.#.#.#.#.#.#.......#.#...#...#.#...#.#.#  \n" +
            "  #.#.#.###.#.###########.#.###########.###.###.###.#########.#.#########.#.#######.#.#.###.###.#.###.#.###########.#.#.#.###.#.#.#  \n" +
            "  #.#...#.....#.#...#.......#...#.....#.#.....#...#.#.........#...#.#...#.#.....#.#.#.#.................#...#.........#.#...#.#...#  \n" +
            "  #.###.###.###.#.#############.#.###.#.#.#####.###.###.#.#.###.#.#.###.###.#.###.###.#######.###.###.###.###.###.#.#######.#.#.###  \n" +
            "  #...#...#...#.....#.....#...#.#.#...........#.#.#...#.#.#.#...#.........#.#.....#...#.......#.#...#.........#.#.#.#.#.#.#.#.....#  \n" +
            "  #.#####.#.###.#########.#.###.#########.#.###.#.#######.#########.#########.#.#.###.#.#######.###########.###.#.#.#.#.#.#.#.###.#  \n" +
            "  #...#...#.#.#.#.#.#...........#.#.....#.#.#...#...#.....#...........#.#.#...#.#.#.#.#.#.......#.#...#.#.#.#...#.#.#.#.....#...#.#  \n" +
            "  #.#####.#.#.#.#.#.#.#.#.#.###.#.#####.#.#####.#.###.###.###########.#.#.###.#####.#.#.#.###.###.###.#.#.#####.#####.#####.#.###.#  \n" +
            "  #.#.#.#.#.....#.....#.#.#.#.#...#.........#.......#.#...#...#.......#.........#.#...#...#...........#...........#.......#.....#.#  \n" +
            "  #.#.#.#.#####.###.#####.###.#.#.#####.###.###.#######.###.#####.#####.###.###.#.#.###.###.#####.###.#.###.###.#####.#####.#####.#  \n" +
            "  #.#.#...#...#.#.....#...#.....#.#.#.#.#...#.....#...#.....#.......#.....#.#.#.#.....#.#.....#.....#.....#.#.#.#...#...........#.#  \n" +
            "  #.#.###.#.###.###.###.#####.###.#.#.###.#####.#####.#.#######.#.#####.#####.#######.###.#######.###.#######.###.#####.###.#######  \n" +
            "  #.....#.....#.#.#.#.#.#.#...#.....#.....#...#...#.......#.....#.#...#.#.#.....#...#.#.......#.#.#.....#...#.#.#.........#.#.....#  \n" +
            "  #.#######.###.#.###.###.#######.#.###.#####.#.#######.#####.#.###.###.#.#####.###.#.#.#######.#####.###.###.#.#####.###.#####.###  \n" +
            "  #...#.#...#.#...#...#...........#.........#.#...#...#.#...#.#.......#...#...#.#.....#.......#.#.#.#...........#.#.#...#.#.....#.#  \n" +
            "  ###.#.#.###.#.#.#.###############.#.###.###.###.#.#.#.#.#######.#.#.#.#####.#.#####.#####.###.#.#.#########.###.#.###.#.#.#####.#  \n" +
            "  #...#.#.#.#...#...#.#.#.........#.#.#...#...#.....#.#.#.#.#.#...#.#.#.......#...#...#...#...#.......#.#.#.....#.#.....#.#.#...#.#  \n" +
            "  ###.#.#.#.#####.###.#.#######.#.#######.###.###.###.#.#.#.#.#.#.#####.###.#####.###.#.#.#.###.###.###.#.#######.###.#####.#.###.#  \n" +
            "  #.#.........#.......#.....#...#.........#.....#.#...#.#.#.#...#...#...#.#.#...#...#.#.#.........#...........#...................#  \n" +
            "  #.###.###########.###.#####.#.#.#.#.#.#.#.#.###.###.#.#.#.###.#####.#.#.#.###.#.#.#.#.#.###.#.#.###.#.#####.#####.#.#.###########  \n" +
            "  #...#...#...#...#...#...#...#.#.#.#.#.#...#.#.#.#.#.#.#...#.#...#...#...#.#.....#...#.#...#.#.#...#.#.....#.#.#.#.#.#.......#.#.#  \n" +
            "  #.###.#.###.###.#.###.###########.#####.#.#.#.###.#.#.#.#.#.#.#######.#######.#.#####.#.#.#.#.#.###.#.#.#.###.#.###.###.#####.#.#  \n" +
            "  #.#.#.#...#.......#...#...#.#...#.#.....#.#.#...#...#...#.#.....#...#.#.#...#.#.....#.#.#.#.#.#...#.#.#.#.#.......#.#.#.#.......#  \n" +
            "  #.#.#.#######.#.###.###.###.#.###.#####.###.#.###.#######.#.#.#####.#.#.###.#####.###.#############.###########.###.#.###.#######  \n" +
            "  #.#.#.#.....#.#.........#.#.........#...#.#...#.#...#.....#.#...#.........#.......#...#...#.#.#...#.#.....#.....................#  \n" +
            "  #.#.#.#.###.###.#######.#.#####.#########.#.#.#.###.#.#######.#########.#######.#####.#.###.#.###.#######.#####.#.#.#############  \n" +
            "  #.......#...#.#.....#.#.#...#.#.#...#.......#...#...#...#.#...#...#.........#...#.#.....#.#...#.....#.#...#.#.#.#.#.....#.#.#.#.#  \n" +
            "  #.###.#######.#.#####.#####.#.###.###.###.#########.###.#.###.#.###.#.#########.#.#####.#.#.#####.###.###.#.#.###.#.#####.#.#.#.#  \n" +
            "  #.#.........#.#...#...#...#...........#.......#.....#.......#...#...#.......#.....#.........#...#...#.#.....#.#.#.#...#.....#...#  \n" +
            "  #####.#######.#.#####.###.#####.#.#####.#########.###.#########.#########.###.#########.#######.#.#.#.#.###.#.#.###.#####.#####.#  \n" +
            "  #...#.#...#.....#.#.#.#.#.....#.#.#    P         H   J         K         X   J         C      #.#.#...#.#.#.....#.........#.....#  \n" +
            "  #.###.#.#######.#.#.#.#.#.#########    Q         C   Z         G         Z   I         R      #.#####.#.#.#########.###########.#  \n" +
            "  #.......#.#...#.....#.......#.....#                                                           #.#.#...#...#...#.....#.#.#.#.#.#.#  \n" +
            "  #####.###.###.#.#.#######.###.#####                                                           #.#.###.#.###.#######.#.#.#.#.#.#.#  \n" +
            "  #.....#.........#.#...#...#.#...#.#                                                         VA..#.#...........#.....#.#.#.....#.#  \n" +
            "  #.#.#########.#####.#####.#.#.###.#                                                           #.#.#.#.#.#.#.###.###.#.#.###.###.#  \n" +
            "  #.#.#...#.#.........#.#...#.....#.#                                                           #...#.#.#.#.#.......#.#...#...#...#  \n" +
            "  #.#.###.#.#.#.#######.###.#.###.#.#                                                           ###.#.#####.#.###.###.#.#.###.#.###  \n" +
            "  #.#.#.....#.#.#.#.....#.#.#.#.#.#.#                                                           #...#.....#.#.#.#...#...#..........AH\n" +
            "  #.#.###.#.#.#.#.###.###.#.#.#.###.#                                                           #.###.#.#######.#####.#.#######.###  \n" +
            "CK..#.....#...#......................BS                                                         #.....#.#.#.#.....#...#...#.#.....#  \n" +
            "  #.#############################.###                                                           #####.###.#.###.###########.###.#.#  \n" +
            "  #.#...........#...............#.#.#                                                           #...#.#.....#.........#...#.#.#.#.#  \n" +
            "  #######.#####.#.#.#.#####.#.#.###.#                                                           #.#.###.###.#.###.###.#.###.#.#####  \n" +
            "UB..#.....#.#...#.#.#...#.#.#.#......DX                                                         #.#...#.#.......#...#...........#.#  \n" +
            "  #.#.#####.#.###.#.#.#.#.#.#####.###                                                           #.###.#.###.#.#.#.###.#.#.###.###.#  \n" +
            "  #.#.......#...#.#.#.#.#.#.#...#.#.#                                                           #...#.#...#.#.#.#.#...#.#.#.....#.#  \n" +
            "  #.#######.#.#.#.###.###.#.###.###.#                                                           #.#.#.#.###############.#####.###.#  \n" +
            "  #.........#.#.....#.#.#.#.#.....#.#                                                         YB..#.#...#.#.#.#.#.#.....#..........CB\n" +
            "  #.#.#####.###.#######.#.#######.#.#                                                           #########.#.#.#.#.###########.#.###  \n" +
            "  #.#.#...#.#.#.#.#.#...#...#...#....NU                                                         #...............#...#.....#...#...#  \n" +
            "  #####.#####.###.#.#.#.#.#.#.###.#.#                                                           #.#####.###.#######.#####.#########  \n" +
            "  #.........#.#...#...#...#.....#.#.#                                                           #.#.#...#.#...#.......#.......#...#  \n" +
            "  ###.#.#####.#.#####.#####.#####.###                                                           #.#.#.###.#.#####.#########.#####.#  \n" +
            "  #.#.#...#.#.#...#...#.......#.#...#                                                           #.#.......#.....#.#...#...#...#....NK\n" +
            "  #.###.###.#.#.###.###.#.#####.###.#                                                           #########.#.#.###.#.###.###.#####.#  \n" +
            "KE..................#.#.#...........#                                                         SG..........#.#.....................#  \n" +
            "  #.#.#.#.#########.#.###############                                                           #################.#########.#####.#  \n" +
            "  #.#.#.#.#...#.#...#.........#.....#                                                           #.......#.......#.#.......#.#...#.#  \n" +
            "  #########.###.#####.#######.#.###.#                                                           ###.#.#######.#.###.#.###.###.#####  \n" +
            "  #...#.#...........#.......#.#...#.#                                                           #.#.#...#.....#.....#...#.#...#.#.#  \n" +
            "  #.###.#######.#.###.#####.#.###.#.#                                                           #.#.#.#.#.#######.#.#.###.#.#.#.#.#  \n" +
            "  #.......#.....#.#.#.#.....#.....#..ML                                                         #...#.#...#.#.#.#.#.#.#.....#...#..GS\n" +
            "  ###.#####.#####.#.###.#.###.###.#.#                                                           #.#.###.#.#.#.#.###########.#.###.#  \n" +
            "SR............#.........#...#.#...#.#                                                         WI..#...#.#.#.#.....#...#...#.#.....#  \n" +
            "  #########.#######.#.#.#######.###.#                                                           ###########.#.#####.#####.#########  \n" +
            "XZ........#.#.#.....#.#...#.#.#.#.#.#                                                           #.#...#.#.#.....#.#...#...........#  \n" +
            "  #.#####.###.#####.###.###.#.###.###                                                           #.#.###.#.###.#.#.#.###.#.#.#.#.#.#  \n" +
            "  #...#.#.#.....#.#.#.#.#.#.....#...#                                                         GE........#.....#.........#.#.#.#.#.#  \n" +
            "  ###.#.#.###.###.###.###.#.#####.###                                                           #.###.###.#.#.#.###.###.#######.###  \n" +
            "  #.#...#...#.....#...#...#.....#.#..AH                                                         #.#...#...#.#.#.#...#.....#........RR\n" +
            "  #.###.#.#.###.#####.###.#.#.#.#.#.#                                                           #####.#.#######.#####.#######.#.#.#  \n" +
            "AA......#.#.................#.#.....#                                                           #.#.#...#...#.......#.#...#...#.#.#  \n" +
            "  ###########################.#######                                                           #.#.#######.#####.#####.###########  \n" +
            "  #.#.#.#.......#.......#...#.#.#...#                                                           #.........#...#.#.#...#.#...#.....#  \n" +
            "  #.#.#.###.###.#.###.#.###.###.#.#.#                                                           #.#######.#.###.###.###.#.#######.#  \n" +
            "  #...........#...#...#.......#...#.#                                                           #.....#...#.#...#.#...#...#.#.#...#  \n" +
            "  #.###.#.#######.#####.#.###.#.###.#                                                           ###.###.#.#.#.###.###.#.###.#.#.#.#  \n" +
            "SG..#...#.....#.......#.#...#.#...#..RR                                                       GS..#.#...#...#...#.#.............#..KG\n" +
            "  #.#.#.#.#.#####.#.#########.#.###.#                                                           #.#.#######.#.###.#####.#####.###.#  \n" +
            "  #.#.#.#.#.#.....#.#.............#.#                                                           #.......#.#.............#.......#.#  \n" +
            "  #.###.#######.#.#.###.#####.#.#.###        S     B   C       G U           C K           N    #.###.#.#.###.###.#.#.#.#####.#####  \n" +
            "  #.#...#.#.....#.#.#...#.#...#.#.#.#        R     D   B       T B           K E           K    #...#.#.#.......#.#.#.#.....#.....#  \n" +
            "  #.###.#.#####.#.#.###.#.###.#####.#########.#####.###.#######.#.###########.#.###########.#####.#####.#.#.#.#.#.#####.#.#.#######  \n" +
            "  #...#.......#.#.#.#...#.#.#...#...#.#.......#.....#.#.#...#.#...#...#.......#.#.....#.......#.....#.#.#.#.#.#.#...#...#.#.......#  \n" +
            "  #.#.#.#.#.#############.#.#.#.###.#.###.###.#.#####.#.#.#.#.#.#.#.#.#.#######.#.#.#########.#######.#.###.###.#.#.#####.###.#####  \n" +
            "  #.#.#.#.#.........#.........#.#.........#...#...#.#.....#...#.#...#.#.......#...#...#...............#.#.#...#.#.#.#.......#.....#  \n" +
            "  #.###.###.###.#########.#####.#######.#######.#.#.#########.###.###.#######.#######.#.#.#.###.###.#####.#.#.###.#.#.#.#.#.###.###  \n" +
            "  #.#.....#.#.#.#.....#...#.......#.........#.#.#.....#.....#...#.#...#.#...#.#...#...#.#.#.#.#.#...#.#.....#...#.#.#.#.#.#...#...#  \n" +
            "  #########.#.#.###.#.#.#.#####.###.###.#.###.#.#.#.###.###.#.#####.#.#.###.#.#.#.#.###.#####.#####.#.#####.#######.###.###.###.###  \n" +
            "  #...........#...#.#...#.#.......#.#.#.#.#...#.#.#...#...#...#.....#...#...#.#.#.#...#.......#.#.........#.#.#.....#.....#...#...#  \n" +
            "  ###.###.#.###.#######.#.###.#.###.#.#.#####.#####.#####.#####.#.#.#####.#.#.#.#.###.#######.#.###.#.#######.#####.#.#.###.###.#.#  \n" +
            "  #.....#.#.#.......#...#.#.#.#.#...#.......#.......#...#...#.#.#.#...#...#...#.#...#...#.........#.#.#.#...#...#...#.#...#.#.#.#.#  \n" +
            "  #######.###.#####.###.###.###.#######.#######.#####.#####.#.#######.#.#####.#.###.#.#######.#########.###.#.#####.###.###.#.#.###  \n" +
            "  #.#.......#.#...#.#.....#.....#.....#.....#.............#.....#.....#.#.....#...#.....#.#...#...#...............#...#.#...#.....#  \n" +
            "  #.#.#.###.#.###.###.#######.#.#####.#.#####.#######.#######.###.#####.#######.#.###.###.###.#.#########.#########.#####.#.#.###.#  \n" +
            "  #...#.#.#.#.#.....#...#.....#.#.......#...#.#.........#.#...#.....#.....#.#...#.#...#.....#.......#.#.#...#.#...#.#.#.#.#.#.#...#  \n" +
            "  #.#.#.#.###.###.#######.#############.#.#####.###.#.###.###.###.###.###.#.#####.#######.###.#####.#.#.#.###.#.###.#.#.###.#####.#  \n" +
            "  #.#.#.#.....#.#.......#.#.......#.........#...#...#.#.......#.....#.#...#.#...........#.......#.#.#...#.#.#.....#.#...#.#...#...#  \n" +
            "  #############.###.###.#####.###.#####.#.#####.###.###.#.###.#.#.#####.###.###.#.#########.#####.#####.#.#.#.#######.###.###.###.#  \n" +
            "  #.....#.#.....#.#.#.#.#.....#.........#.#.......#...#.#.#...#.#.#.........#...#.......#.#.......#...#.............#.......#.#...#  \n" +
            "  ###.###.#####.#.#.#.#.#.#############.###.###.#######.#.###.#.#######.###.#.#.###.#.###.###.#####.###.###.#.#######.###########.#  \n" +
            "  #.......#.#.....#.#.....#.#.#...........#.#.........#.#.#...#.....#...#...#.#.#...#.....#...............#.#...............#.....#  \n" +
            "  #######.#.#####.###.#.###.#.#####.#.###.#####.###.#####.###.#.#######.#.#.###.###.#######.#.###.#.#.#.#######.#.###########.###.#  \n" +
            "  #...#...........#...#.#.#...#.#...#.#.#.....#.#...#.......#.#...#.#...#.#.#.....#.#...#...#.#...#.#.#...#.#...#.......#.#...#...#  \n" +
            "  ###.###.###.#.#.#.#####.###.#.#######.#####.#.###.#########.#.###.###.#####.#.#####.###.###.###.#####.###.#.#.#.###.###.#####.#.#  \n" +
            "  #.....#.#...#.#.#.#.......#.#...#.......#...#.#.#.#.......#.#.#.....#.....#.#.....#.....#.....#.....#.#.#...#.#...#...#.#.....#.#  \n" +
            "  #.#.###########.#########.#.###.#####.#.#.###.#.#######.###.#.###.#.#.#########.#####.#########.#######.#.###.#########.#######.#  \n" +
            "  #.#.#...#.....#...#...........#.#...#.#.#...#.......#...#...#.....#.#.#...#.........#.....#.#.....#...#.#...#.#...#.......#.#.#.#  \n" +
            "  ###.#.###.#.###.#.###.#######.#.###.#.#.###.#####.###.#.#.#########.#.###.###.###########.#.###.###.###.#####.#.#######.###.#.#.#  \n" +
            "  #.....#.#.#.#...#...#.#...........#...#.....#.#.....#.#.....#.......#.#...#.#.....#.....#.....#.......#.#.#.#.#.......#...#.#.#.#  \n" +
            "  #####.#.###.#####.#.#.###.#.#.###.###.#####.#.#####.#.#.#.#####.#####.###.#.#.###.###.#.#.#.#####.#.###.#.#.#####.#####.#.#.#.###  \n" +
            "  #.................#.....#.#.#.#.#.........#.#.#.....#.#.#.#.#.#.#...#...#.#...#.#.#...#.#.#...#...#.......#.#.#.....#...#.......#  \n" +
            "  #.###.#.#.#.#####.###.#########.#.#.#####.###.#####.#.###.#.#.#.#.#.#.###.###.#.#####.#.#.###############.#.#.###.#######.#######  \n" +
            "  #...#.#.#.#.#.#...#...#...........#.#.......#.#.....#...#...#...#.#.#.#...#.....#.....#.........#.#.....#.......................#  \n" +
            "  #.###.###.###.#.###.#####.#.###.#.#######.###.###.#########.#.###.#.#.#.#.#####.#####.###########.#.#####.#####.#.#.#.#.#.#######  \n" +
            "  #...#.#...#.......#.#.....#.#...#...#.......#.......#.......#.....#.#...#...#.....#...................#.....#...#.#.#.#.#.......#  \n" +
            "  ###########################################.#.#########.#########.#.#####.#####.###########.#####################################  \n" +
            "                                             W H         D         N P     J     G           C                                       \n" +
            "                                             I C         X         U Q     I     E           R                                       ";

    public static void main(String[] args) {
        long tick = System.currentTimeMillis();

        DonutMazeParser parser = new DonutMazeParser(input);

        DonutMaze dm = new DonutMaze(parser.getMap());
        // dm.print(parser.getTeleports());
        // step1(parser, dm);
        step2(parser);

        System.out.println("time: " + (System.currentTimeMillis() - tick) + " ms");
    }

    private static void step1(DonutMazeParser parser, DonutMaze dm) {
        DfsCalcDonut calc = new DfsCalcDonut(parser.getTeleports(), dm);
        int steps = calc.exploreFromStart();

        System.out.println("Steps: " + steps);
    }

    private static void step2(DonutMazeParser parser) {
        DonutMazeStep2 dm = new DonutMazeStep2(parser.getMap());
        DfsCalcDonut2 calc = new DfsCalcDonut2(parser.getTeleports(), dm, 30);
        int steps = calc.exploreFromStart();

        System.out.println("Steps: " + steps);
    }

}
